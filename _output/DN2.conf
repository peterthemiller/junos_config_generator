system {
    host-name DN2;
    domain-name honeybadgers.lab;
    root-authentication {
        encrypted-password $6$Mj7jZ6K7$YFmGnY6bxnDKQJXJA3gXuCaVXPE4V8IV8mInSeDY7EI9QF7RV5jk/U8QCIST6ioTU1Mw8hdS0Qk0keqKRGtYR0 ; ## SECRET-DATA
    }
    login {
        user netlaw {
            uid 2001;
            class super-user;
            authentication {
                encrypted-password $6$Mj7jZ6K7$YFmGnY6bxnDKQJXJA3gXuCaVXPE4V8IV8mInSeDY7EI9QF7RV5jk/U8QCIST6ioTU1Mw8hdS0Qk0keqKRGtYR0 ; ## SECRET-DATA
            }
        }
        user peter {
            uid 2002;
            class super-user;
            authentication {
                encrypted-password $6$ibKgP0Q6$NhsnM.EApWp4qY2SgaTzkmjWt76tAzLQ9.LVDJdMp9BT8xlau.BCNDy15nONLfGahlsagG34BF..ok1cyjn/30; ## SECRET-DATA
            }
        }
    }
    services {
        ssh {
            root-login deny;
        }
    }
    syslog {
        user * {
            any emergency;
        }
        file messages {
            any notice;
            authorization info;
        }
        file interactive-commands {
            interactive-commands any;
        }
    }

}
interfaces {
    lo0 {
        unit 0 {
            family inet {
                address 4.4.4.4/32;
                no-redirects;
                description loopback;
            }
        }
    }
    xe-0/0/0 {
        unit 0 {
            family inet {
                address 10.1.4.2/30;
                no-redirects;
                description to CN1;
            }
        }
    }
    xe-0/0/1 {
        unit 0 {
            family inet {
                address 10.2.4.2/30;
                no-redirects;
                description to CN2;
            }
        }
    }
    irb {
        unit 240 {
            family inet {
                address 192.168.2.4/24;
                no-redirects;
                description CN2_MGMT;
            }
        }
    }
    irb {
        unit CN210 {
            family inet {
                address 10.2.10/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_USERS 210"
            }
        }
    irb {
        unit CN220 {
            family inet {
                address 10.2.20/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_PHONES 220"
            }
        }
    irb {
        unit CN230 {
            family inet {
                address 10.2.30/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_PRINTERS 230"
            }
        }
    irb {
        unit CN240 {
            family inet {
                address 10.2.40/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_MGMT 240"
            }
        }
    irb {
        unit CN2666 {
            family inet {
                address 10.2.666/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_DEAD_VLAN 2666"
            }
        }
    irb {
        unit CN2999 {
            family inet {
                address 10.2.999/24;
                no-redirects;
                description "layer 3 interface for vlan CN2_NATIVE_VLAN 2999"
            }
        }
    xe-0/0/2 {
        unit 0 {
            family ethernet-switching {
                native-vlan-id 999;
                port-mode trunk;
                vlan {
                    members [ USERS  PHONES  PRINTERS  MGMT ];
                }
            }
        }
    }
    xe-0/0/3 {
        unit 0 {
            family ethernet-switching {
                native-vlan-id 999;
                port-mode trunk;
                vlan {
                    members [ USERS  PHONES  PRINTERS  MGMT ];
                }
            }
        }
    }
    xe-0/0/4 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/5 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/6 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/7 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/8 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/9 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/10 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
    xe-0/0/11 {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members CN2_USERS;
                }
            }
        }
    }
}
vlans {
    CN2_USERS {
        vlan-id 210;
        l3-interface irb.210;
        description CN2_Users; 
    }
    CN2_PHONES {
        vlan-id 220;
        l3-interface irb.220;
        description CN2_Phones; 
    }
    CN2_PRINTERS {
        vlan-id 230;
        l3-interface irb.230;
        description CN2_Printers; 
    }
    CN2_MGMT {
        vlan-id 240;
        l3-interface irb.240;
        description CN2_Management; 
    }
    DEAD_VLAN {
        vlan-id 666;
        description DEAD_VLAN;
    }
    NATIVE_VLAN {
        vlan-id 999;
        description NATIVE_VLAN;
    }
}
protocols {
        ospf {
            area 0.0.0.0 {
                interface xe-0/0/0.0 {
                    interface-type p2p;
                    hello-interval 1;
                    dead-interval 4;
                    authentication {
                        md5 1 key "$9$chHrvLdVYaGi7-VYoJkqp0OISrvWL"; ## SECRET-DATA
                    }
                }
                interface xe-0/0/1.0 {
                    interface-type p2p;
                    hello-interval 1;
                    dead-interval 4;
                    authentication {
                        md5 1 key "$9$chHrvLdVYaGi7-VYoJkqp0OISrvWL"; ## SECRET-DATA
                    }
                }
                interface lo0.0 {
                    passive;
                }
            }
            reference-bandwidth 100g;
        }
 
        mstp {
            bpdu-block-on-edge;
            configuration-name labregion1;
            bridge-priority 8k;
            interface all;
            interface xe-0/0/4 {
                no-root-port;
                edge;
            }
            interface xe-0/0/5 {
                no-root-port;
                edge;
            }
            interface xe-0/0/6 {
                no-root-port;
                edge;
            }
            interface xe-0/0/7 {
                no-root-port;
                edge;
            }
            interface xe-0/0/8 {
                no-root-port;
                edge;
            }
            interface xe-0/0/9 {
                no-root-port;
                edge;
            }
            interface xe-0/0/10 {
                no-root-port;
                edge;
            }
            interface xe-0/0/11 {
                no-root-port;
                edge;
            }
            msti 1 {
                bridge-priority 8k;
                vlan [ USERS  PHONES  PRINTERS  MGMT ];
            }
            
        }
}